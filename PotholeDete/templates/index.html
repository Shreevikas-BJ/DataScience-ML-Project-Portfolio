<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Pothole Detection (yolov8m)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; margin: 24px; background:#0b0b0c; color:#eee; }
    .card { background:#151517; border-radius:14px; padding:16px; max-width:980px; margin:auto; box-shadow:0 6px 20px rgba(0,0,0,.35);}
    h1 { margin: 0 0 10px 0; }
    .row { display:flex; gap:16px; flex-wrap:wrap; }
    .col { flex:1 1 320px; }
    .panel { background:#1e1e22; border-radius:12px; padding:12px; }
    .btn { background:#4f6ef7; color:white; padding:8px 14px; border-radius:10px; border:none; cursor:pointer; }
    .btn:disabled { background:#3b3b44; cursor:default; }
    input[type="file"]{ color:#ddd; }
    img, video { max-width:100%; border-radius:12px; border:1px solid #2b2b33; }
    small { color:#aaa; }
  </style>
</head>
<body>
  <div class="card">
    <h1>YOLOv8 (TensorRT) â€“ Live Video Detection</h1>
    <p>Upload a road video and watch live detections (pothole, cars, humans) while it plays.</p>

    <div class="row">
      <div class="col">
        <div class="panel">
          <form action="/upload" method="post" enctype="multipart/form-data">
            <label><b>Upload video</b> (mp4/avi/mov):</label><br/>
            <input type="file" name="video" accept="video/*" required />
            <button class="btn" type="submit">Start Detection</button>
          </form>
          <p><small>Tip: larger videos may stream faster if you downscale to 720p.</small></p>
          <hr/>
          <form action="/use_sample" method="post">
            <label>Or use a video already in <code>/uploads</code>:</label><br/>
            <input name="name" placeholder="example.mp4" />
            <button class="btn" type="submit">Play Sample</button>
          </form>
        </div>
      </div>

      <div class="col">
        <div class="panel">
          <b>Live Stream</b>
          <img id="stream" src="/video_feed" alt="Live detection stream"/>
          <p><small>If the stream is blank, upload a video first.</small></p>
        </div>
      </div>
    </div>

    <p><small>Powered by <code>best_fp16.engine</code> (TensorRT). For real-time pacing, we roughly match the source FPS.</small></p>
  </div>
</body>
</html>
